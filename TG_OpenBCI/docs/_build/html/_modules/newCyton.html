<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>newCyton &#8212; TG_Projeto_BCI_4  documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="TG_Projeto_BCI_4  documentation" href="../index.html" />
    <link rel="up" title="Module code" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for newCyton</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">newCyton.py</span>
<span class="sd">~~~</span>
<span class="sd">Novo módulo baseado no arquivo cyton.py original do projeto OpenBCI.</span>
<span class="sd"> </span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">cyton</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">serial</span>
<span class="kn">import</span> <span class="nn">struct</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1">#import matplotlib.pyplot as plt</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">timeit</span>
<span class="kn">import</span> <span class="nn">atexit</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pdb</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="c1">#-------------------------------</span>
<span class="c1">#copia novouser.py</span>

<span class="kn">import</span> <span class="nn">argparse</span>  <span class="c1"># new in Python2.7</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;OpenBCI Cyton&quot;</span><span class="p">)</span>

<span class="c1">#------------------------------------------------------------------------------   </span>
<span class="c1">#sample rate de 250 SPS é fixo para placa Cyton com dongle</span>

<span class="n">SAMPLE_RATE</span> <span class="o">=</span> <span class="mf">250.0</span>  <span class="c1"># Hz</span>
<span class="n">START_BYTE</span> <span class="o">=</span> <span class="mh">0xA0</span>  <span class="c1"># start of data packet</span>
<span class="n">END_BYTE</span> <span class="o">=</span> <span class="mh">0xC0</span>  <span class="c1"># end of data packet</span>
<span class="n">ADS1299_Vref</span> <span class="o">=</span> <span class="mf">4.5</span>  <span class="c1"># reference voltage for ADC in ADS1299.  set by its hardware</span>
<span class="n">ADS1299_gain</span> <span class="o">=</span> <span class="mf">24.0</span>  <span class="c1"># assumed gain setting for ADS1299.  set by its Arduino code</span>
<span class="n">scale_fac_uVolts_per_count</span> <span class="o">=</span> <span class="n">ADS1299_Vref</span> <span class="o">/</span> \
    <span class="nb">float</span><span class="p">((</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="n">ADS1299_gain</span> <span class="o">*</span> <span class="mf">1000000.</span>
<span class="n">scale_fac_accel_G_per_count</span> <span class="o">=</span> <span class="mf">0.002</span> <span class="o">/</span> \
    <span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>  <span class="c1"># assume set to +/4G, so 2 mG</span>

<span class="n">stringxX</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">]</span>
<span class="n">stringxXmaster</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">],[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">],[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">],[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">],[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">],[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">],[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">],[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">]]</span>
<span class="n">stringJoin</span> <span class="o">=</span> <span class="s1">&#39;teste&#39;</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="newCyton"><a class="viewcode-back" href="../index.html#newCyton.newCyton">[docs]</a><span class="k">class</span> <span class="nc">newCyton</span><span class="p">(</span><span class="n">cyton</span><span class="o">.</span><span class="n">OpenBCICyton</span><span class="p">):</span>
        
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filter_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        
        <span class="n">cyton</span><span class="o">.</span><span class="n">OpenBCICyton</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span> <span class="n">baud</span><span class="o">=</span><span class="mi">115200</span><span class="p">,</span>
                                    <span class="n">filter_data</span><span class="o">=</span><span class="n">filter_data</span><span class="p">,</span>
                                    <span class="n">scaled_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                    <span class="n">daisy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">aux</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">impedance</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        
        
        <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#self.baudrate = baud</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">port</span><span class="p">:</span>
            <span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_port</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span>
      <span class="c1"># might be handy to know API</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">board_type</span> <span class="o">=</span> <span class="s2">&quot;cyton&quot;</span>
       
       <span class="c1"># if port == &quot;loop://&quot;:</span>
            <span class="c1"># For testing purposes</span>
            <span class="c1">#self.ser = serial.serial_for_url(port, baudrate=baud, timeout=timeout)</span>
       <span class="c1"># else:</span>
            <span class="c1">#self.ser = serial.Serial(port=port, baudrate=baud, timeout=timeout)</span>
<span class="c1">#        sstringxX = [&#39;x&#39;, 0, 0, 0 , 0, 0, 0, 0, &#39;X&#39;]</span>
<span class="c1">#        stringJoin = &#39;x0000000X&#39;</span>
<span class="c1">#        n = 0</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;myCytonSerial established...&quot;</span><span class="p">)</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="c1"># Initialize 32-bit board, doesn&#39;t affect 8bit board</span>
        <span class="c1">#realiza soft reset</span>
        <span class="c1">#mostra</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;v&#39;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1">#colocando a sequência abaixo ele vai comendo caracteres</span>
        <span class="c1">#por algum motivo na mensagem, mas parece funcionar.</span>
        <span class="c1">#x2000000Xx3000000Xx4000000Xx5000000Xx6000000Xx7000000Xx1000000X&#39;)</span>
        
<span class="c1">#        print(&#39;Inicialização dos 8/16 canais...&#39;)</span>
<span class="c1">#        </span>
<span class="c1">#        time.sleep(1)</span>
<span class="c1">#        self.warn(&#39;teste_de_warn&#39;)      </span>
<span class="c1">#        </span>
<span class="c1">#        self.ser.write(b&#39;x1000000X&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        taime.sleep(0.5)</span>
<span class="c1">#        self.ser.write(b&#39;x2000000X&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        time.sleep(0.5)</span>
<span class="c1">#        self.ser.write(b&#39;x3000000X&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        time.sleep(0.5)</span>
<span class="c1">#        self.ser.write(b&#39;x4000000X&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        time.sleep(0.5)</span>
<span class="c1">#        self.ser.write(b&#39;x5000000X&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        time.sleep(0.5)</span>
<span class="c1">#        self.ser.write(b&#39;x6000000X&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        time.sleep(0.5)</span>
<span class="c1">#        self.ser.write(b&#39;x7000000X&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        time.sleep(0.5)</span>
<span class="c1">#        self.ser.write(b&#39;x8000000X&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        time.sleep(0.5)</span>
<span class="c1">#       </span>
<span class="c1">#        self.ser.write(b&#39;?&#39;)</span>
        
        <span class="c1">#self.print_incoming_text()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fim da configuração de canais&#39;</span><span class="p">)</span>
        <span class="c1">#self.ser.write(b&#39;?&#39;)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Serial write ? mostra as configurações&quot;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
                <span class="c1"># wait for device to be ready</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">port</span> <span class="o">!=</span> <span class="s2">&quot;loop://&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_incoming_text</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filtering_data</span> <span class="o">=</span> <span class="n">filter_data</span>
        <span class="c1">#self.scaling_output = scaled_output</span>
        <span class="c1"># number of EEG channels per sample *from the board*</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eeg_channels_per_sample</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="c1"># number of AUX channels per sample *from the board*</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aux_channels_per_sample</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imp_channels_per_sample</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># impedance check not supported at the moment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.daisy = daisy</span>
        <span class="c1">#self.last_odd_sample = OpenBCISample(-1, [], [])  # used for daisy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_packet_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attempt_reconnect</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_reconnect</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reconnect_freq</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">packets_dropped</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Disconnects from board when terminated</span>
        <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">sample</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">8</span>
        <span class="c1">#self.log = log</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        
        <span class="c1">#Initialize check connection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_connection</span><span class="p">()</span>
     
<div class="viewcode-block" id="newCyton.readSample"><a class="viewcode-back" href="../index.html#newCyton.newCyton.readSample">[docs]</a>    <span class="k">def</span> <span class="nf">readSample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is about readSample. </span>
<span class="sd">        :param abra: abra number. </span>
<span class="sd">        :param cadabra: cadabra number.</span>
<span class="sd">        :param sesame: sesame information.</span>
<span class="sd">        :return ret_val: result information.</span>
<span class="sd">        :rtype: int.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># read current sample</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streamStart</span><span class="p">()</span>
        <span class="c1">#time.sleep(1)</span>
        <span class="n">sample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_serial_binary</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">sample</span><span class="o">.</span><span class="n">channel_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="mf">0.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sample</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">channel_data</span>
        <span class="c1">#self.print_incoming_text()</span>
<span class="c1">#        time.sleep(5)</span>
<span class="c1">#        self.myStopStreaming()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample</span></div>
    
    <span class="k">def</span> <span class="nf">print_bytes_in</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">read</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span>   
           
            
    <span class="k">def</span> <span class="nf">myStopStreaming</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span>
    

<span class="c1">#       Esta função é utilizada em outras para reiniciar a string que é enviada para a placa após certos comandos</span>
<div class="viewcode-block" id="newCyton.resetStringxX"><a class="viewcode-back" href="../index.html#newCyton.newCyton.resetStringxX">[docs]</a>    <span class="k">def</span> <span class="nf">resetStringxX</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sobre resetStringxX </span>
<span class="sd">        Função utilizada internamente para reiniciar a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="k">global</span> <span class="n">stringxXmaster</span>
        <span class="n">stringxX</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">]</span>
        <span class="k">return</span></div>
    
<span class="c1">#       laço que torna todos os elementos da lista em string</span>
<span class="c1">#       sem a conversão não é possível utilizar o .join que é aplicável somente a strings</span>
<span class="c1">#       o .join torna, por exemplo, [&#39;x&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;,&#39;X&#39;] em x0000000X</span>
    <span class="k">def</span> <span class="nf">transforma_String</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="c1">#for i in range(0, 7):</span>
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="k">global</span> <span class="n">stringJoin</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">):</span>
            <span class="n">stringxX</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">stringxX</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            
        <span class="n">stringJoin</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stringxX</span><span class="p">)</span>
        <span class="c1"># O b que aparece é a conversão do unicode de python 3 para bytes como é o utlizaod em seirlad</span>
<span class="c1">#        for i in range(0,):</span>
<span class="c1">#            stringB = [&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;,&#39;f&#39;,&#39;g&#39;,&#39;h&#39;]</span>
<span class="c1">#            stringB[i+1] = stringJoin[i]</span>
<span class="c1">#            stringB[0] = &#39;b&#39;</span>
<span class="c1">#       convertebyte = b</span>
        <span class="n">stringSer</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">stringJoin</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">stringSer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">stringSer</span><span class="p">)</span>
        <span class="c1">#time.sleep(1)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStringxX</span><span class="p">()</span>
        <span class="k">return</span>

<span class="c1">#       A função ligar_Canal aceita valores em &quot;canal&quot; de 1 a 8, dos 8 canais da placa Cyton; para os valores de ligado ou desligado</span>
 <span class="c1">#       Para liga = 1 o canal está ligado, liga = 0 está desligado</span>
<div class="viewcode-block" id="newCyton.ligar_Canal"><a class="viewcode-back" href="../index.html#newCyton.newCyton.ligar_Canal">[docs]</a>    <span class="k">def</span> <span class="nf">ligar_Canal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canal</span><span class="p">,</span> <span class="n">liga</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sobre ligar_Canal </span>
<span class="sd">        :param canal: este parâmetro determina qual canal será ligado(1 a 8). </span>
<span class="sd">        :param liga: o valor padrão é 1(ligado), mas pode ser 0(desligado).</span>
<span class="sd">        Retorna qual é o canal que foi ligado/desligado.</span>
<span class="sd">        :return ret_val: result information.    </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">global</span> <span class="n">stringJoin</span>
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">canal</span>
        <span class="k">if</span><span class="p">(</span><span class="n">liga</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">stringxX</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span><span class="p">(</span><span class="n">liga</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">stringxX</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforma_String</span><span class="p">()</span>
<span class="c1">#        self.print_incoming_text()</span>
<span class="c1">#        print(&#39;passo1&#39;)</span>
<span class="c1">#        time.sleep(2)</span>
<span class="c1">#        print(&#39;passo2&#39;)</span>
<span class="c1">#        self.print_incoming_text()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Canal configurado&#39;</span><span class="p">,</span> <span class="n">canal</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">stringJoin</span><span class="p">)</span>
       <span class="c1"># print(&#39;passo3&#39;)</span>
        <span class="c1">#time.sleep(2)</span>
       <span class="c1"># self.print_incoming_text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStringxX</span><span class="p">()</span>
        <span class="k">return</span></div>
    
<span class="c1">#       Os canais são de 1-8; as opções de ganho são os valores 1, 2, 3, 4, 6, 12 e 24</span>
<span class="c1">#       O ganho padrão é de 24</span>
<div class="viewcode-block" id="newCyton.escolher_Ganho"><a class="viewcode-back" href="../index.html#newCyton.newCyton.escolher_Ganho">[docs]</a>    <span class="k">def</span> <span class="nf">escolher_Ganho</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canal</span><span class="p">,</span> <span class="n">ganho</span><span class="o">=</span><span class="mi">24</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sobre ligar_Canal </span>
<span class="sd">        :param canal: este parâmetro determina qual canal será ligado(1 a 8). </span>
<span class="sd">        :param ganho: as opções de ganho são os valores 1, 2, 3, 4, 6, 12 e 24; o valor padrão é 24.</span>
<span class="sd">        Retorna qual é o valor do ganho e de qual canal.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="n">gain</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">24</span><span class="p">]</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">canal</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">gain</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">ganho</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforma_String</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ganho de&#39;</span><span class="p">,</span> <span class="n">ganho</span><span class="p">,</span> <span class="s1">&#39;do&#39;</span><span class="p">,</span> <span class="n">canal</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStringxX</span><span class="p">()</span>
        <span class="k">return</span></div>

<span class="c1">#       Escolha o tipo de input: normal, curto, BIAS, fonte, temperatura, sinalteste, BIASpos, BIASneg</span>
<span class="c1">#       Escreva o tipo entre aspas &#39;&#39;</span>
<div class="viewcode-block" id="newCyton.escolher_Input"><a class="viewcode-back" href="../index.html#newCyton.newCyton.escolher_Input">[docs]</a>    <span class="k">def</span> <span class="nf">escolher_Input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canal</span><span class="p">,</span> <span class="n">tipo</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sobre escolher_Input </span>
<span class="sd">        :param canal: este parâmetro determina qual canal será definido o tipo de input(1 a 8). </span>
<span class="sd">        :param tipo: anormal, curto, BIAS, fonte, temperatura, sinalteste, BIASpos, BIASneg; o tipo deve estar entre aspas ex:&#39;BIASpos&#39;.</span>
<span class="sd">        Retorna qual é o tipo de input e qual canal.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="n">inp</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span><span class="s1">&#39;curto&#39;</span><span class="p">,</span><span class="s1">&#39;BIAS&#39;</span><span class="p">,</span><span class="s1">&#39;fonte&#39;</span><span class="p">,</span><span class="s1">&#39;temperatura&#39;</span><span class="p">,</span><span class="s1">&#39;sinalteste&#39;</span><span class="p">,</span><span class="s1">&#39;BIASpos&#39;</span><span class="p">,</span><span class="s1">&#39;BIASneg&#39;</span><span class="p">]</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">canal</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">inp</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">tipo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforma_String</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Tipo de input escolhido&#39;</span><span class="p">,</span> <span class="s1">&#39;do&#39;</span><span class="p">,</span> <span class="n">canal</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStringxX</span><span class="p">()</span>
        <span class="k">return</span></div>
 
<span class="c1">#       Determina se liga ou não o BIAS, aceita True ou False como valores de &quot;BIAS&quot;  </span>
<div class="viewcode-block" id="newCyton.ativar_BIAS"><a class="viewcode-back" href="../index.html#newCyton.newCyton.ativar_BIAS">[docs]</a>    <span class="k">def</span> <span class="nf">ativar_BIAS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">canal</span><span class="p">,</span><span class="n">BIAS</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sobre escolher_Input </span>
<span class="sd">        :param canal: este parâmetro determina qual canal terá o BIAS ligado ou não(1 a 8). </span>
<span class="sd">        :param BIAS: parâmetro True para ligar, False para desligar; valor padrão é True.</span>
<span class="sd">        Retorna qual é o estado do BIAS e de qual canal é.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">canal</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">BIAS</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforma_String</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;BIAS configurado&#39;</span><span class="p">,</span> <span class="n">BIAS</span><span class="p">,</span> <span class="s1">&#39;do&#39;</span><span class="p">,</span> <span class="n">canal</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStringxX</span><span class="p">()</span>
        <span class="k">return</span></div>
    
<span class="c1">#       Determina se liga ou não o SRB2, aceita True ou False como valores de &quot;SRB2&quot;    </span>
    <span class="k">def</span> <span class="nf">ativar_SRB2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">canal</span><span class="p">,</span><span class="n">SRB2</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">canal</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">SRB2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforma_String</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;BIAS configurado&#39;</span><span class="p">,</span> <span class="n">SRB2</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStringxX</span><span class="p">()</span>
        <span class="k">return</span>
    
<span class="c1">#       Determina se liga ou não o SRB1, aceita True ou False como valores de &quot;SRB1&quot;    </span>
    <span class="k">def</span> <span class="nf">ativar_SRB1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">canal</span><span class="p">,</span><span class="n">SRB1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">canal</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">SRB1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforma_String</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;BIAS configurado&#39;</span><span class="p">,</span> <span class="n">SRB1</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStringxX</span><span class="p">()</span>
        <span class="k">return</span>
    
<span class="c1">#       stringxX pode ser alterado manualmente com o comando abaixo, mas necessita da conversões abaixo:</span>
<span class="c1">#       &quot;canal&quot; aceita valores de 1 a 8, para selecionar os canais</span>
<span class="c1">#       &quot;liga&quot; aceita valores de 0 ou 1, 0 significa canal ligado, e 1 canal desligado</span>
<span class="c1">#       &quot;ganho&quot; aceita valores de 0 a 6, considera-se a tabela de conversão: 0/1/2/3/4/5/6(serial) &lt;=&gt; 1/2/4/6/8/12/24 (ganho)</span>
<span class="c1">#       &quot;inp&quot; aceita valores de 0 a 7, para selecionar o tipo de input: 0/1/2/3/4/5/6/7 &lt;=&gt; normal/curto/BIAS/fonte/temperatura/sinalteste/BIASpos/BIASneg (tipo)</span>
<span class="c1">#       &quot;bias&quot; aceita valores de 0 ou 1, 0 significa bias ligado, 1 bias desligado</span>
<span class="c1">#       &quot;srb2&quot; aceita valores de 0 ou 1, 0 significa srb2 ligado, 1 srb2 desligado</span>
<span class="c1">#       &quot;srb1&quot; aceita valores de 0 ou 1, 0 significa srb1 ligado, 1 srb1 desligado</span>
<span class="c1">#       Configuração de Canais (Channel Setting Commands): x (CHANNEL, POWER_DOWN, GAIN_SET, INPUT_TYPE_SET, BIAS_SET, SRB2_SET, SRB1_SET) X </span>
    <span class="k">def</span> <span class="nf">configCanal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">canal</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">liga</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">ganho</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">inp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">bias</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">srb2</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">srb1</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">global</span> <span class="n">stringxX</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">canal</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">liga</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">ganho</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">inp</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">bias</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">srb2</span>
        <span class="n">stringxX</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">srb1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforma_String</span><span class="p">()</span>
        <span class="c1">##self.print_incoming_text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStringxX</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Canal Configurado&#39;</span><span class="p">,</span><span class="n">canal</span><span class="p">,</span><span class="n">liga</span><span class="p">,</span><span class="n">ganho</span><span class="p">,</span><span class="n">inp</span><span class="p">,</span><span class="n">bias</span><span class="p">,</span><span class="n">srb2</span><span class="p">,</span><span class="n">srb1</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1">#Comandos Firmware 1.0.0</span>
    
        <span class="c1">#Desligar Canais (Turn Channels OFF): 1 2 3 4 5 6 7 8</span>
        <span class="c1">#Ligar Canais (Turn Channels ON): ! @ # $ % ^ &amp; *</span>
        <span class="c1">#Podem ser incluídos, mas devido à redundância com os comandos de canal não foram adicionados</span>
        <span class="c1">#Sinais de Teste (Test Signal Control Commands): 0 - = p [ ]</span>
        <span class="c1">#Liga todos os canais, e os conecta ao teste de sinal interno, útil para calibração e teste dos canais, para checar o funcionamento destes</span>
        <span class="c1">#São dos tipos ground; sinal com 1x amplitude (devagar ou veloz); sinal corrente contínua; sinal com 2x de amplitude (devagar ou veloz)</span>
    <span class="k">def</span> <span class="nf">testGND</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sinal de teste GND&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">test1xAmpSlow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sinal de teste ganho 1, devagar&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">test1xAmpFast</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sinal de teste ganho 1, rápido&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">testDC</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
        
        <span class="c1">#self.print_incoming_text</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sinal de teste CC&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">test2xAmpSlow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;[&#39;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sinal de teste ganho 1, devagar&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">test2xAmpFast</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;]&#39;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sinal de teste ganho 1, rápido&#39;</span><span class="p">)</span>
        <span class="k">return</span>
         
        <span class="c1">#Configuração de Canal Padrão(Default Channel Settings): d</span>
        <span class="c1">#Altera as configurações de canais para o padrão</span>
        <span class="c1">#Relatório de Configuração Padrão: D</span>
        <span class="c1">#Gera um relatório sobre o status da configuração padrão</span>
    <span class="k">def</span> <span class="nf">padrao</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Configurações padrões&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">padraoRelatorio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Relatório padronizado&#39;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="k">return</span>
    
        <span class="c1">#Impedância do Canal (LeadOff Impedance Commands): z (CHANNEL, PCHAN, NCHAN) Z</span>
        <span class="c1">#O comando enviado é similar à configuração de canais, z e Z são start e end bits respectivamente</span>
        <span class="c1">#Canal configura o canal específico, aceita valores de 1 a 8, pchan e nchan aceitam valores de 0 e 1, 0 não é aplicado o sinal de teste, 1 é aplicado</span>
        <span class="c1">#O comando é utilizado para se determinar se a impedância nos polos dos canais está correta, envia um sinal de AC de 31.5Hz</span>
        <span class="c1">#Espera-se que o canal seja atenuado, caso esteja adequada a conexão, sem atenuação do sinal pode indicar uma má conexão</span>
    <span class="k">def</span> <span class="nf">zDoCh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">canal</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">pchan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">nchan</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">stringZ</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">,</span><span class="n">canal</span><span class="p">,</span><span class="n">pchan</span><span class="p">,</span><span class="n">nchan</span><span class="p">,</span><span class="s1">&#39;Z&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
            <span class="n">stringZ</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">stringZ</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">stringZJunta</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stringZ</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">stringSerial</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="n">stringZJunta</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">stringSerial</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Teste de impedância&#39;</span><span class="p">)</span>
        <span class="c1">#self.print_incoming_text()</span>
        <span class="n">stringZ</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;Z&#39;</span><span class="p">]</span>
        <span class="k">return</span>
        
        <span class="c1">#Comandos do Cartão SD (SD card Commands):</span>
        <span class="c1">#O comando é utilizado para realizar registro por certo período de tempo das leituras feitas pela placa</span>
        <span class="c1">#A S F G H J K L a: cada letra destas corresponde ao tempo de aquisição de dados, que corresponde ao vetor:</span>
        <span class="c1">#Em minutos? 5 15 30 60 120 240 720 1440 (a = 14 segundos, pra teste)</span>
        <span class="c1">#A/S/F/G/H/J/K/L/a &lt;=&gt; 5 min./15 min./30 min./60 min./120 min./240 min./720 min./1440 min./14 segs.</span>
        <span class="c1">#Parar o logging e fechar o arquivo SD: j</span>
<div class="viewcode-block" id="newCyton.sdTime5m"><a class="viewcode-back" href="../index.html#newCyton.newCyton.sdTime5m">[docs]</a>    <span class="k">def</span> <span class="nf">sdTime5m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Comandos do Cartão SD (SD card Commands):</span>
<span class="sd">        O comando é utilizado para realizar registro por certo período de tempo das leituras feitas pela placa, fazendo data logging no cartão SD.    </span>
<span class="sd">        sdTime5m/15m/30m/60m/120m/240m/720m/1440m/14s &lt;=&gt; 5 min./15 min./30 min./60 min./120 min./240 min./720 min./1440 min./14 segs. de registro</span>
<span class="sd">        Parar o logging e fechar o arquivo SD: sdStop</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 5 minutos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
        <span class="k">return</span></div>
    <span class="k">def</span> <span class="nf">sdTime15m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 15 minutos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sdTime30m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 30 minutos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sdTime60m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 60 minutos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;G&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sdTime120m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 120 minutos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sdTime240m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 240 minutos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;J&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sdTime720m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 720 minutos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;K&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sdTime1440m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 1440 minutos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sdTime14s</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Registro no cartão SD 14 segundos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sdStop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;j&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fim do registro no cartão SD&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    
        <span class="c1">#Comandos de Stream de Dados (Stream Data Commands): </span>
        <span class="c1">#b :começa o streaming de dados</span>
        <span class="c1">#s :interrompe o streaming de dados</span>
    
    <span class="k">def</span> <span class="nf">streamStart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ident</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">data</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">aaux_data</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">imp_data</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">t</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">sample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_serial_binary</span><span class="p">()</span>
<span class="c1">#            ident = packet_id</span>
<span class="c1">#            data = channel_data</span>
<span class="c1">#            aaaux_data = aux_data</span>
<span class="c1">#            imp_data = []</span>
<span class="c1">#            print(sample)</span>
<span class="c1">#            print(ident)</span>
<span class="c1">#            print(data)</span>
<span class="c1">#            print(aaaux_data)</span>
<span class="c1">#            print(imp_data)</span>
        <span class="k">return</span>
    
<div class="viewcode-block" id="newCyton.start_streaming"><a class="viewcode-back" href="../index.html#newCyton.newCyton.start_streaming">[docs]</a>    <span class="k">def</span> <span class="nf">start_streaming</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">lapse</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start handling streaming data from the board. Call a provided callback</span>
<span class="sd">        for every single sample that is processed (every two samples with daisy module).</span>

<span class="sd">        Args:</span>
<span class="sd">          callback: A callback function, or a list of functions, that will receive a single</span>
<span class="sd">           argument of the OpenBCISample object captured.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">start_time</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">default_timer</span><span class="p">()</span>

        <span class="c1"># Enclose callback funtion in a list if it comes alone</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="p">[</span><span class="n">callback</span><span class="p">]</span>

        <span class="c1"># Initialize check connection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_connection</span><span class="p">()</span>

        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">streaming</span><span class="p">:</span>

            <span class="c1"># read current sample</span>
            <span class="n">sample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_serial_binary</span><span class="p">()</span>
            <span class="c1"># if a daisy module is attached, wait to concatenate two samples</span>
            <span class="c1"># (main board + daisy) before passing it to callback</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">daisy</span><span class="p">:</span>
                <span class="c1"># odd sample: daisy sample, save for later</span>
                <span class="k">if</span> <span class="o">~</span><span class="n">sample</span><span class="o">.</span><span class="n">id</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">last_odd_sample</span> <span class="o">=</span> <span class="n">sample</span>
                <span class="c1"># even sample: concatenate and send if last sample was the fist part,</span>
                <span class="c1">#  otherwise drop the packet</span>
                <span class="k">elif</span> <span class="n">sample</span><span class="o">.</span><span class="n">id</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_odd_sample</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                    <span class="c1"># the aux data will be the average between the two samples, as the channel</span>
                    <span class="c1">#  samples themselves have been averaged by the board</span>
                    <span class="n">avg_aux_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">aux_data</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_odd_sample</span><span class="o">.</span><span class="n">aux_data</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="n">whole_sample</span> <span class="o">=</span> <span class="n">OpenBCISample</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                                 <span class="n">sample</span><span class="o">.</span><span class="n">channel_data</span> <span class="o">+</span>
                                                 <span class="bp">self</span><span class="o">.</span><span class="n">last_odd_sample</span><span class="o">.</span><span class="n">channel_data</span><span class="p">,</span>
                                                 <span class="n">avg_aux_data</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="n">callback</span><span class="p">:</span>
                        <span class="n">call</span><span class="p">(</span><span class="n">whole_sample</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="n">callback</span><span class="p">:</span>
                    <span class="n">call</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">lapse</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">timeit</span><span class="o">.</span><span class="n">default_timer</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">lapse</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log_packet_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_packet_count</span> <span class="o">+</span> <span class="mi">1</span></div>
    
    <span class="k">def</span> <span class="nf">read_serial_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_bytes_to_skip</span><span class="o">=</span><span class="mi">3000</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">bb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">bb</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Device appears to be stalled. Quitting...&#39;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Device Stalled&#39;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
                <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\xFF</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">bb</span>

        <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_bytes_to_skip</span><span class="p">):</span>

            <span class="c1"># ---------Start Byte &amp; ID---------</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">b</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">START_BYTE</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">rep</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                            <span class="s1">&#39;Skipped </span><span class="si">%d</span><span class="s1"> bytes before start found&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rep</span><span class="p">))</span>
                        <span class="n">rep</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="c1"># packet id goes from 0-255</span>
                    <span class="n">packet_id</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">log_bytes_in</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">packet_id</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="c1"># ---------Channel Data---------</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">channel_data</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eeg_channels_per_sample</span><span class="p">):</span>

                    <span class="c1"># 3 byte ints</span>
                    <span class="n">literal_read</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

                    <span class="n">unpacked</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;3B&#39;</span><span class="p">,</span> <span class="n">literal_read</span><span class="p">)</span>
                    <span class="n">log_bytes_in</span> <span class="o">=</span> <span class="n">log_bytes_in</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">literal_read</span><span class="p">)</span>

                    <span class="c1"># 3byte int in 2s compliment</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">unpacked</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">127</span><span class="p">):</span>
                        <span class="n">pre_fix</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="nb">bytearray</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="s1">&#39;FF&#39;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pre_fix</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="nb">bytearray</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="s1">&#39;00&#39;</span><span class="p">))</span>

                    <span class="n">literal_read</span> <span class="o">=</span> <span class="n">pre_fix</span> <span class="o">+</span> <span class="n">literal_read</span>

                    <span class="c1"># unpack little endian(&gt;) signed integer(i)</span>
                    <span class="c1"># (makes unpacking platform independent)</span>
                    <span class="n">myInt</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;i&#39;</span><span class="p">,</span> <span class="n">literal_read</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scaling_output</span><span class="p">:</span>
                        <span class="n">channel_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myInt</span> <span class="o">*</span> <span class="n">scale_fac_uVolts_per_count</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">channel_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myInt</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">=</span> <span class="mi">2</span>

            <span class="c1"># ---------Accelerometer Data---------</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">aux_data</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aux_channels_per_sample</span><span class="p">):</span>

                    <span class="c1"># short = h</span>
                    <span class="n">acc</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;h&#39;</span><span class="p">,</span> <span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">log_bytes_in</span> <span class="o">=</span> <span class="n">log_bytes_in</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scaling_output</span><span class="p">:</span>
                        <span class="n">aux_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">acc</span> <span class="o">*</span> <span class="n">scale_fac_accel_G_per_count</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">aux_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="c1"># ---------End Byte---------</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">log_bytes_in</span> <span class="o">=</span> <span class="n">log_bytes_in</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">read_state</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># read next packet</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="n">END_BYTE</span><span class="p">):</span>
                    <span class="n">sample</span> <span class="o">=</span> <span class="n">OpenBCISample</span><span class="p">(</span><span class="n">packet_id</span><span class="p">,</span> <span class="n">channel_data</span><span class="p">,</span> <span class="n">aux_data</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">packets_dropped</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">return</span> <span class="n">sample</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;ID:&lt;</span><span class="si">%d</span><span class="s2">&gt; &lt;Unexpected END_BYTE found &lt;</span><span class="si">%s</span><span class="s2">&gt; instead of &lt;</span><span class="si">%s</span><span class="s2">&gt;&quot;</span>
                              <span class="o">%</span> <span class="p">(</span><span class="n">packet_id</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">END_BYTE</span><span class="p">))</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">log_bytes_in</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">packets_dropped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">packets_dropped</span> <span class="o">+</span> <span class="mi">1</span>
            
    <span class="k">def</span> <span class="nf">streamStop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Finalizando o streaming&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    
        <span class="c1">#Comandos Sortidos:</span>
        <span class="c1">#? :lê e gera um relatório sobre todas as configurações do ADS1299 e o LIS3DH</span>
        <span class="c1">#ADS1299 é um conversor AD especializado para medidas de biopotencial</span>
        <span class="c1">#LIS3DH é um acelerômetro linear de três eixos</span>
    <span class="k">def</span> <span class="nf">adslisRelatorio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Relatório das configurações atuais&#39;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="c1">#        </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;?&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_incoming_text</span><span class="p">()</span>
        
        <span class="k">return</span> 
        <span class="c1">#v :&quot;soft reset&quot; da placa Cyton</span>
    <span class="k">def</span> <span class="nf">softReset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Soft reset da placa&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;v&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    
    <span class="c1">#Comandos Daisy/16 Canais</span>
        <span class="c1">#Desligar Canais (Turn Channels OFF):</span>
        <span class="c1">#q w e r t y u i :desligam respectivamente os canais de 9 a 16, na ordem</span>
        <span class="c1">#Ligar Canais (Turn Channels ON):</span>
        <span class="c1">#Q W E R T Y U I :ligam respectivamente os canais de 9 a 16, na ordem</span>
        <span class="c1"># As funções aceitam valores de 9 a 16</span>
    <span class="k">def</span> <span class="nf">daisyChOff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canal</span><span class="p">):</span>
        <span class="n">daisyOff</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;t&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;u&#39;</span><span class="p">,</span><span class="s1">&#39;i&#39;</span><span class="p">]</span>
        <span class="n">canalOff</span> <span class="o">=</span> <span class="n">daisyOff</span><span class="p">[</span><span class="n">canal</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">serialOff</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="n">canalOff</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">serialOff</span><span class="p">)</span>  
        <span class="c1">#self.print_incoming_text()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Desligando canal da Daisy:&#39;</span><span class="p">,</span> <span class="n">canal</span><span class="p">)</span>
        <span class="k">return</span>
        
    <span class="k">def</span> <span class="nf">daisyChOn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">canal</span><span class="p">):</span>
        <span class="n">daisyOn</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Q&#39;</span><span class="p">,</span><span class="s1">&#39;W&#39;</span><span class="p">,</span><span class="s1">&#39;E&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">,</span><span class="s1">&#39;T&#39;</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span><span class="s1">&#39;U&#39;</span><span class="p">,</span><span class="s1">&#39;I&#39;</span><span class="p">]</span>
        <span class="n">canalOn</span> <span class="o">=</span> <span class="n">daisyOn</span><span class="p">[</span><span class="n">canal</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">serialOn</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="n">canalOn</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">serialOn</span><span class="p">)</span>  
        <span class="c1">#self.print_incoming_text()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ligando canal da Daisy:&#39;</span><span class="p">,</span> <span class="n">canal</span><span class="p">)</span>
        <span class="k">return</span>
            
        <span class="c1">#Número de Canais(Select maximum channel number):</span>
        <span class="c1">#c :Habilita somente os canais 1 a 8</span>
        <span class="c1">#C :Habilita todos os canais de 1 a 16</span>
    <span class="k">def</span> <span class="nf">maxCh8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Limite de canais de 1 a 8&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">maxCh16</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Limite de canais de 1 a 16&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    
    <span class="c1">#Comandos Firmware 2.0.0</span>
        <span class="c1"># Marcação do Tempo (Time Stamping):</span>
        <span class="c1">#&lt; :Inicia o time stamping, sincronizando o Driver e o Host.</span>
        <span class="c1">#&gt; :Para o time stamping.</span>
    <span class="k">def</span> <span class="nf">timeStamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&lt;&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Início do Time Stamping&#39;</span><span class="p">)</span>
        
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">timeStop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&gt;&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fim do Time Stamping&#39;</span><span class="p">)</span>
        <span class="k">return</span>
            
        <span class="c1">#Número de Rádio do Canal (Get Radio Channel Number):</span>
        <span class="c1">#0xF0 0x00: retorna a falha ou sucesso, e o valor do host, mais o do aparelho no caso de sucesso.</span>
        <span class="c1">#Configurar Número do Canal de Rádio (Set Radio System Channel Number):</span>
        <span class="c1">#0xF0 0x01 0x07: retorna a falha ou sucesso, sucesso se o host e o aparelho estiverem com o mesmo valor; também retorna em HEX o valor do canal.</span>
        <span class="c1">#O 0x07 é opcional, para determinar o canal, de 1 a 25 em HEX. De 0x01 a 0x19</span>
        <span class="c1">#Configurar Sobreposição do Canal de Rádio (Set Host Radio Channel Override):</span>
        <span class="c1">#0xF0 0x02 0x01: retorna falha ou sucesso, força a troca de canal do Host para o canal(opcional). De 0x01 a 0x19</span>
    <span class="k">def</span> <span class="nf">radioGet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;0xF0 0x00&#39;</span><span class="p">)</span>
        <span class="k">return</span>
          
    <span class="k">def</span> <span class="nf">radioSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">radSet</span><span class="p">):</span>
        <span class="n">radioSet</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;0x01&#39;</span><span class="p">,</span><span class="n">radSet</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">radioSet</span><span class="p">)</span>
        <span class="k">return</span>
            
    <span class="k">def</span> <span class="nf">radioOver</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">radioOver</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;0x02&#39;</span><span class="p">,</span><span class="n">radOver</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">radioOver</span><span class="p">)</span>
        <span class="k">return</span>
            
        <span class="c1">#Obter Poll Time de Rádio(Radio Get Poll Time):</span>
        <span class="c1">#0xF0 0x03: retorno de pool time, pode significar erros e está associado com as capacidades do sistema. Retornado em HEX o poll time.</span>
        <span class="c1">#Configurar Poll Time de Rádio(Radio Get Poll Time):</span>
        <span class="c1">#0xF0 0x04 0x40:a terceira opção determina o poll time em HEX, são aceitos valores de 0 a 255, em ms. Padrão é de 80ms.</span>
    <span class="k">def</span> <span class="nf">radioPoll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;0xF0 0x03&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">radioPollSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pollSet</span><span class="o">=</span><span class="mi">80</span><span class="p">):</span>
        <span class="n">radioPoll</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;0x04&#39;</span><span class="p">,</span><span class="n">pollSet</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">radioPoll</span><span class="p">)</span>
        <span class="k">return</span>
                             
        <span class="c1">#Configurar o Baud Rate para o Padrão do Rádio do Host (Radio Set HOST to Driver Baud Rate to Default):</span>
        <span class="c1">#0xF0 0x05: configura o Baud Rate para 115200Hz.</span>
        <span class="c1">#Configurar o Baud Rate para Modo de Alta-Velocidade (Radio Set HOST to Driver Baud Rate to High-Speed mode):</span>
        <span class="c1">#0xF0 0x06: configura o Baud Rate pra 230400Hz.</span>
        <span class="c1">#Configurar o Baud Rate para Modo de Hiperalta-Velocidade (Radio Set HOST to Driver Baud Rate to Hyper-Speed mode):</span>
        <span class="c1">#0xF0 0x0A: configura o Baud Rate pra 921600Hz.</span>
    <span class="k">def</span> <span class="nf">radio1152kHz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;0xF0 0x05&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">radio2304kHz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;0xF0 0x06&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">radio9216kHz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;0xF0 0x0A&#39;</span><span class="p">)</span>
        <span class="k">return</span>
        
        <span class="c1">#Relatório do Sistema de Rádio:</span>
        <span class="c1">#0xF0 0x07: checa o status do sistema de rádio, confirma ou nega se está operante.</span>
    <span class="k">def</span> <span class="nf">radioRelat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;0xF0 0x07&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    
    <span class="c1">#Comandos Firmware 3.0.0</span>
        
        <span class="c1">#Taxa de Aquisição (Sample Rate):</span>
        <span class="c1">#~0 : configura a taxa de aquisição, o 0 no comando pode ser alterado para os valores 0/1/2/3/4/5/6/~</span>
        <span class="c1">#Os valores correspondem às taxas: 16000Hz / 8000Hz / 4000Hz / 2000Hz / 1000Hz / 500Hz / 250Hz / Obter a taxa de aquisição atual</span>
    <span class="k">def</span> <span class="nf">sample16k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;~0&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample Rate: 16000Hz&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sample8k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;~1&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample Rate: 8000Hz&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sample4k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;~2&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample Rate: 4000Hz&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sample2k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;~3&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample Rate: 2000Hz&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sample1k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;~4&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample Rate: 1000Hz&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sample500</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;~5&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample Rate: 500Hz&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sample250</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;~6&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample Rate: 250Hz&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">sampleStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;~~&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample Rate Atual&#39;</span><span class="p">)</span>
        <span class="k">return</span>
        
        <span class="c1">#Modo da Placa (Board Mode):</span>
        <span class="c1">#/0 : configura o modo da placa, o 0 no comando pode ser alterado para os valores 0/1/2/3/4//</span>
        <span class="c1">#Os valores correspondem as modos: Padrão / Modo Debug / Modo Analógico / Modo Digital / Modo Marcador / Obter o modo de aquisição atual</span>
    <span class="k">def</span> <span class="nf">boardModeDef</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;/0&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Modo: Padrão&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">boardModeDebug</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;/1&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Modo: Debug&#39;</span><span class="p">)</span>
        
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">boardModeAnalog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;/2&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Modo: Analógico&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">boardModeDigital</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;/3&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Modo: Digital&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">boardModeMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;/4&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Modo: Marcador&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">boardModeStatus</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;/X&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Modo Atual&#39;</span><span class="p">)</span>
        <span class="k">return</span>
        
    <span class="k">def</span> <span class="nf">startText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="k">return</span>
        
        <span class="c1">#Comandos do Shield de Wifi (Wifi Shield Commands):</span>
        <span class="c1">#{ : Faz uma tentativa de se sincronizar com shield de Wifi, retorna o sucesso ou falha.</span>
        <span class="c1">#} : Tenta remover o shield de Wifi, retorna sucesso ou falha da operação.</span>
        <span class="c1">#: : Obtém o status do shield de Wifi, se está presente ou não.</span>
    <span class="k">def</span> <span class="nf">WifiShieldSync</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Tentativa de sincronização de Wifi&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;{&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> 
    <span class="k">def</span> <span class="nf">WifiShieldDesync</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Tentativa de desincronização de Wifi&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;}&#39;</span><span class="p">)</span>
        <span class="k">return</span>                     
    <span class="k">def</span> <span class="nf">WifiShieldStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status do Wifi&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;:&#39;</span><span class="p">)</span> 
        <span class="k">return</span>
        
         <span class="c1">#Obter Versão (Get Version):</span>
         <span class="c1">#V : Retorna a versão do Firmware.</span>
    <span class="k">def</span> <span class="nf">firmware</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;V&#39;</span><span class="p">)</span>
        <span class="c1">#time.sleep(0.5)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_incoming_text</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Versão do Firmware:&#39;</span><span class="p">)</span>
        
        <span class="k">return</span></div>
                             
    <span class="c1">#Adendo</span>
        
        <span class="c1">#Caracteres não utilizados: 9 ( ) _ o O f g h k l ‘ “ n N M , . (space)</span>
<span class="k">class</span> <span class="nc">OpenBCISample</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">packet_id</span><span class="p">,</span> <span class="n">channel_data</span><span class="p">,</span> <span class="n">aux_data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">packet_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel_data</span> <span class="o">=</span> <span class="n">channel_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aux_data</span> <span class="o">=</span> <span class="n">aux_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imp_data</span> <span class="o">=</span> <span class="p">[]</span>

     
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Author.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.9</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>